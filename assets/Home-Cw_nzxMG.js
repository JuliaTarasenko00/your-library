import{$ as j,p as F,j as e,r as a,q as y}from"./index-BhOCtK2E.js";import{G as p}from"./iconBase-CAsvnwgN.js";import{a as w}from"./index-JjA-UONQ.js";function N(t){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"},child:[]}]})(t)}function v(t){return p({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z"},child:[]}]})(t)}const k="/books",L=async(t=1)=>{const{data:o}=await j.get(`${k}/recommend?page=${t}`);return o},B=t=>{const{data:o,isLoading:s}=F({queryKey:["response/recommend_book",t],queryFn:()=>L(t)});return{data:o,isLoading:s}},$=()=>e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx("div",{className:"loader border-r-1 box-border h-[50px] w-[50px] animate-spin rounded-full border-t-2 border-solid border-white border-r-transparent"})}),E=document.getElementById("modal"),C=({children:t,closeModal:o,isOpen:s})=>{const i=n=>{n.currentTarget===n.target&&o()};return a.useEffect(()=>{const n=c=>{c.code==="Escape"&&o()};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}},[o]),y.createPortal(e.jsxs("div",{className:`relative z-10 ${s?"h-100% w-100% opacity-100":"h-0 w-0 opacity-0"} transition duration-[450ms] ease-out`,"aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:`${s?"h-100% w-100% opacity-100":"h-0 w-0 opacity-0"} fixed inset-0 transition duration-[450ms] ease-out`,"aria-hidden":"true"}),e.jsx("div",{className:`fixed inset-0 ${s?"h-100% w-100% opacity-100":"h-0 w-0 opacity-0"} z-10 w-screen overflow-y-auto transition duration-[450ms] ease-out`,children:e.jsx("div",{className:`flex min-h-full items-end justify-center ${s?"h-100% w-100% opacity-100":"h-0 w-0 opacity-0"} bg-[#14141499] p-4 text-center transition duration-[450ms] ease-out sm:items-center sm:p-0`,onClick:i,children:e.jsxs("div",{className:"relative rounded-[12px] border-[1px] border-[#68686833] bg-[#1F1F1F] p-[50px]",children:[e.jsx("button",{type:"button",className:"absolute right-[16px] top-[16px] h-[22px] w-[22px]",onClick:o,children:e.jsx(w,{})}),t]})})})]}),E)},P=({book:t,closeModal:o,isOpen:s})=>(console.log("book: ",t),e.jsx(C,{closeModal:o,isOpen:s,children:t!==null&&e.jsxs("div",{className:"flex max-w-[450px] flex-col items-center justify-center",children:[e.jsx("img",{src:t.imageUrl,alt:t.title,width:153,height:233,className:"mb-[16px] h-[233px] rounded-[8px]"}),e.jsx("p",{className:"mb-[2px] text-[20px] font-bold leading-[20px] text-[#F9F9F9]",children:t.title}),e.jsx("p",{className:"mb-[4px] text-[14px] font-normal leading-[18px] text-[#686868]",children:t.author}),e.jsx("p",{className:"mb-[32px] text-[10px] leading-[12px] text-[#F9F9F9]",children:t.totalPages}),e.jsx("button",{type:"button",className:"rounded-[30px] border-[1px] border-[#F9F9F933] px-[28px] py-[14px] text-[16px] font-bold leading-[18px] text-[#F9F9F9]",children:"Start reading"})]})})),I=()=>{const[t,o]=a.useState(!1),s=()=>{o(!t)};return a.useEffect(()=>{t?document.body.style.overflow="hidden":document.body.style.overflow="auto"},[t]),{open:t,onToggleModal:s}},D=()=>{const[t,o]=a.useState(1),{data:s,isLoading:i}=B(t),[n,c]=a.useState(null),{open:m,onToggleModal:x}=I(),u=()=>{(s==null?void 0:s.totalPages)!==t&&o(t+1)},h=()=>{t!==1&&o(t-1)},f=l=>{const d=s==null?void 0:s.results.find(({_id:r})=>r===l);c(d),x()};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"h-full w-full",children:[e.jsxs("div",{className:"mb-[20px] flex items-center justify-between",children:[e.jsx("h2",{className:"text-[28px] font-bold leading-[32px] text-[#F9F9F9]",children:"Recommended"}),e.jsxs("div",{className:"flex items-center justify-end gap-[8px]",children:[e.jsx("button",{type:"button",onClick:h,disabled:t===1,className:"flex items-center justify-center rounded-[30px] border-[1px] border-[#F9F9F933] px-[15px] py-[15px] text-[#F9F9F9] disabled:text-[#F9F9F933]",children:e.jsx(N,{className:"h-[20px] w-[20px]"})}),e.jsx("button",{type:"button",onClick:u,disabled:(s==null?void 0:s.totalPages)===t,className:"flex items-center justify-center rounded-[30px] border-[1px] border-[#F9F9F933] px-[15px] py-[15px] text-[#F9F9F9] disabled:text-[#F9F9F933]",children:e.jsx(v,{className:"h-[20px] w-[20px]"})})]})]}),i?e.jsx($,{}):e.jsx("ul",{className:"grid grid-cols-5 justify-center gap-x-[20px] gap-y-[27px]",children:s==null?void 0:s.results.map(({_id:l,imageUrl:d,title:r,author:g})=>{const b=`${r.slice(0,22)}${r.length>=22?"...":""}`;return e.jsxs("li",{className:"flex w-[137px] flex-col",onClick:()=>f(l),children:[e.jsx("img",{src:d,alt:r,width:137,height:208,loading:"lazy",className:"h-[208px] rounded-[8px]"}),e.jsxs("div",{className:"flex-grow-[1]",children:[e.jsx("h2",{className:"mb-[2px] mt-[8px] text-[14px] font-bold leading-[18px] text-[#F9F9F9]",children:b}),e.jsx("h4",{className:"text-[10px] font-normal leading-[12px] text-[#686868]",children:g})]})]},l)})})]}),e.jsx(P,{book:n,closeModal:x,isOpen:m})]})};function M(){return e.jsx(D,{})}export{M as default};
