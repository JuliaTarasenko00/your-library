import{$ as b,p as y,j as e,r as l,q as w}from"./index-BZrOAhC7.js";import{G as x}from"./iconBase-da1ZScB3.js";import{a as F}from"./index-D4p0EpN4.js";function v(t){return x({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"},child:[]}]})(t)}function N(t){return x({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z"},child:[]}]})(t)}const k="/books",L=async(t=1)=>{const{data:o}=await b.get(`${k}/recommend?page=${t}`);return o},B=t=>{const{data:o,isLoading:s}=y({queryKey:["response/recommend_book",t],queryFn:()=>L(t)});return{data:o,isLoading:s}},E=()=>e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx("div",{className:"loader border-r-1 box-border h-[50px] w-[50px] animate-spin rounded-full border-t-2 border-solid border-white border-r-transparent"})}),C=document.getElementById("modal"),I=({children:t,closeModal:o})=>{const s=n=>{n.currentTarget===n.target&&o()};return l.useEffect(()=>{const n=a=>{a.code==="Escape"&&o()};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}},[o]),w.createPortal(e.jsxs("div",{className:"relative z-10","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"fixed inset-0 bg-[#14141499] transition-opacity","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",onClick:s,children:e.jsxs("div",{className:"relative rounded-[12px] border-[1px] border-[#68686833] bg-[#1F1F1F] p-[50px]",children:[e.jsx("button",{type:"button",className:"absolute right-[16px] top-[16px] h-[22px] w-[22px]",onClick:o,children:e.jsx(F,{})}),t]})})})]}),C)},P=({book:t,closeModal:o})=>e.jsx(I,{closeModal:o,children:t==null?void 0:t.author}),D=()=>{const[t,o]=l.useState(!1),s=()=>{o(!t)};return l.useEffect(()=>{t?document.body.style.overflow="hidden":document.body.style.overflow="auto"},[t]),{open:t,onToggleModal:s}},R=()=>{const[t,o]=l.useState(1),{data:s,isLoading:n}=B(t),[a,p]=l.useState(null),{open:m,onToggleModal:d}=D(),u=()=>{(s==null?void 0:s.totalPages)!==t&&o(t+1)},f=()=>{t!==1&&o(t-1)},h=c=>{const i=s==null?void 0:s.results.find(({_id:r})=>r===c);p(i),d()};return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"h-full w-full",children:[e.jsxs("div",{className:"mb-[20px] flex items-center justify-between",children:[e.jsx("h2",{className:"text-[28px] font-bold leading-[32px] text-[#F9F9F9]",children:"Recommended"}),e.jsxs("div",{className:"flex items-center justify-end gap-[8px]",children:[e.jsx("button",{type:"button",onClick:f,disabled:t===1,className:"flex items-center justify-center rounded-[30px] border-[1px] border-[#F9F9F933] px-[15px] py-[15px] text-[#F9F9F9] disabled:text-[#F9F9F933]",children:e.jsx(v,{className:"h-[20px] w-[20px]"})}),e.jsx("button",{type:"button",onClick:u,disabled:(s==null?void 0:s.totalPages)===t,className:"flex items-center justify-center rounded-[30px] border-[1px] border-[#F9F9F933] px-[15px] py-[15px] text-[#F9F9F9] disabled:text-[#F9F9F933]",children:e.jsx(N,{className:"h-[20px] w-[20px]"})})]})]}),n?e.jsx(E,{}):e.jsx("ul",{className:"flex flex-wrap justify-center gap-x-[20px] gap-y-[27px]",children:s==null?void 0:s.results.map(({_id:c,imageUrl:i,title:r,author:g})=>{const j=`${r.slice(0,22)}${r.length>=22?"...":""}`;return e.jsxs("li",{className:"flex w-[137px] flex-col",onClick:()=>h(c),children:[e.jsx("img",{src:i,alt:r,width:137,height:208,loading:"lazy",className:"h-[208px] rounded-[8px]"}),e.jsxs("div",{className:"flex-grow-[1]",children:[e.jsx("h2",{className:"mb-[2px] mt-[8px] text-[14px] font-bold leading-[18px] text-[#F9F9F9]",children:j}),e.jsx("h4",{className:"text-[10px] font-normal leading-[12px] text-[#686868]",children:g})]})]},c)})})]}),a&&m&&e.jsx(P,{book:a,closeModal:d})]})};function M(){return e.jsx(R,{})}export{M as default};
