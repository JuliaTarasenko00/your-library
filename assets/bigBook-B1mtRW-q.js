import{r as x,g as b,j as t,h as F,f as j,u as B,c as g,e as N,b as C,F as S}from"./index-OKUh9O3t.js";import{G as y}from"./iconBase-DatZFiS9.js";import{a as E}from"./index-b_gtpb7O.js";import{u as z,b as L,t as M}from"./toastStyle-PjBteUHU.js";import{b as V,g as I,i as A,c as T}from"./Title-BgtK49Qs.js";function H(e){return y({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M5 20a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V8h2V6h-4V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v2H3v2h2zM9 4h6v2H9zM8 8h9v12H7V8z"},child:[]},{tag:"path",attr:{d:"M9 10h2v8H9zm4 0h2v8h-2z"},child:[]}]})(e)}const P=()=>{const[e,s]=x.useState(!1),n=()=>{s(!e)};return x.useEffect(()=>{e?document.body.style.overflow="hidden":document.body.style.overflow="auto"},[e]),{open:e,onToggleModal:n}},Q=document.getElementById("modal"),W=({children:e,closeModal:s,isOpen:n})=>{const r=a=>{a.currentTarget===a.target&&s()};return x.useEffect(()=>{const a=c=>{c.code==="Escape"&&s()};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[s]),b.createPortal(t.jsxs(t.Fragment,{children:[t.jsx("div",{className:`${n?"h-100% w-100% opacity-100":"h-0 w-0 opacity-0"} fixed inset-0 transition duration-[450ms] ease-out`,"aria-hidden":"true"}),t.jsx("div",{className:`fixed inset-0 ${n?"h-100% w-100% opacity-100":"h-0 w-0 opacity-0"} z-10 w-screen overflow-y-auto transition duration-[450ms] ease-out`,children:t.jsx("div",{className:`flex min-h-full items-center justify-center ${n?"h-100% w-100% opacity-100":"h-0 w-0 opacity-0"} sm:items-center sm:p-0 bg-[#14141499] p-4 text-center transition duration-[450ms] ease-out`,onClick:r,children:t.jsxs("div",{className:"relative rounded-[12px] border-[1px] border-[#68686833] bg-[#1F1F1F] px-[25px] py-[40px] md:min-w-[450px] md:p-[50px]",children:[t.jsx("button",{type:"button",className:"absolute right-[16px] top-[16px] h-[22px] w-[22px]",onClick:s,children:t.jsx(E,{})}),e]})})})]}),Q)},k=()=>{const{mutate:e,isPending:s}=z({mutationKey:["add/book_to_library_by_id"],mutationFn:n=>V(n)});return{mutate:e,isPending:s}},q=()=>{const{data:e,isLoading:s}=F({queryKey:["fetch/get_library"],queryFn:I});return{data:e,isLoading:s}},O=({book:e,closeModal:s,isOpen:n})=>{const r=j(),a=B(),{mutate:c,isPending:m}=k(),{data:i}=q(),u=(e==null?void 0:e.imageUrl)!==null?e==null?void 0:e.imageUrl:A,d=()=>{e!=null&&e._id&&c(e._id,{onSuccess:async()=>{await r.invalidateQueries({queryKey:["fetch/get_library"]}),g.success("Your book is now in the library!",{style:L})},onError:p=>{g.error(p.response.data.message,{style:M})}})},l=x.useMemo(()=>(i==null?void 0:i.find(({title:p})=>(e==null?void 0:e.title)===p))??!1,[i,e]),o=l||e;return t.jsx(t.Fragment,{children:t.jsx(W,{closeModal:s,isOpen:n,children:!!o&&t.jsxs("div",{className:"flex max-w-[450px] flex-col items-center justify-center",children:[t.jsx("img",{src:u,alt:o.title,loading:"lazy",width:153,height:233,className:"mb-[16px] h-[213px] w-[140px] rounded-[8px] md:h-[233px] md:w-[153px]"}),t.jsx("p",{className:"mb-[2px] text-[18px] font-bold leading-[18px] text-[#F9F9F9] md:text-[20px] md:leading-[20px]",children:o.title}),t.jsx("p",{className:"mb-[4px] text-[12px] font-normal leading-[14px] text-[#686868] md:text-[14px] md:leading-[18px]",children:o.author}),t.jsx("p",{className:"mb-[20px] text-[10px] leading-[12px] text-[#F9F9F9] md:mb-[32px]",children:o.totalPages}),l?t.jsx("button",{type:"button",onClick:()=>{a(`/reading/${o._id}`),s()},className:"transition-custom rounded-[30px] border border-[#F9F9F933] px-[24px] py-[12px] text-[14px] font-bold leading-[18px] text-[#F9F9F9] hover:border-[#F9F9F9] hover:bg-[#F9F9F9] hover:text-[#1F1F1F] focus:border-[#F9F9F9] focus:bg-[#F9F9F9] focus:text-[#1F1F1F] md:px-[28px] md:py-[14px] md:text-[16px]",children:"Start reading"}):t.jsx("button",{type:"button",onClick:d,disabled:m,className:"transition-custom rounded-[30px] border border-[#F9F9F933] px-[24px] py-[12px] text-[14px] font-bold leading-[18px] text-[#F9F9F9] hover:border-[#F9F9F9] hover:bg-[#F9F9F9] hover:text-[#1F1F1F] focus:border-[#F9F9F9] focus:bg-[#F9F9F9] focus:text-[#1F1F1F] md:px-[28px] md:py-[14px] md:text-[16px]",children:"Add to library"})]})})})},Y=({data:e,onDeleteBookFromLibrary:s})=>{const{open:n,onToggleModal:r}=P(),[a,c]=x.useState(null),{pathname:m}=N(),i=m.slice(1)===C.library,u=d=>{const l=e==null?void 0:e.find(({_id:o})=>o===d);c(l),r()};return t.jsxs(t.Fragment,{children:[t.jsx("ul",{className:"grid grid-cols-2 justify-center gap-x-[8px] xs:gap-x-[21px] md:grid-cols-4 md:gap-x-[20px] md:gap-y-[27px] xl:grid-cols-5",children:e==null?void 0:e.map(({_id:d,imageUrl:l,title:o,author:p})=>{const h=i?11:22,w=`${o.slice(0,h)}${o.length>=h?"...":""}`,v=l!==null?l:A;return t.jsxs("li",{className:"mx-auto mt-0 flex w-[120px] cursor-pointer flex-col xs:w-[137px]",onClick:()=>u(d),children:[t.jsx("img",{src:v,alt:o,width:137,height:208,loading:"lazy",className:"h-[208px] rounded-[8px]"}),t.jsxs("div",{className:`${i?"flex items-center justify-between gap-[5px]":""} flex-grow-[1]`,children:[t.jsxs("div",{children:[t.jsx("h2",{className:"mb-[2px] mt-[8px] text-[14px] font-bold leading-[18px] text-[#F9F9F9]",children:w}),t.jsx("h4",{className:"text-[10px] font-normal leading-[12px] text-[#686868]",children:p})]}),i&&t.jsx("button",{type:"button",onClick:f=>{s&&s(f,d)},className:"flex h-[28px] w-[28px] min-w-[28px] items-center justify-center rounded-[14px] border-[1px] border-[#E8505033] bg-[#E850501A]",children:t.jsx(H,{className:"h-[14px] w-[14px] text-[#E85050]"})})]})]},d)})}),t.jsx(O,{book:a,closeModal:r,isOpen:n})]})},U=()=>{const e=x.useContext(S);if(!e)throw new Error("some problems with book filtering");return e},X=(e,s)=>{const{value:{title:n,author:r}}=U(),{data:a,isLoading:c}=F({queryKey:["response/recommend_book",e,s,n,r],queryFn:()=>T(e,s,n,r),enabled:!!e&&!!s});return{data:a,isLoading:c}};function Z(e){return y({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"},child:[]}]})(e)}const _="data:image/webp;base64,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";export{Y as B,Z as F,X as a,_ as b,q as c,U as u};
