import{f as E,u as k,j as e,b as C,c as y,r as p}from"./index-CgAXJbHS.js";import{a as B,F as L,b as M,B as P}from"./index-DHnznoHH.js";import{u as F,a as V,C as w,c as z,t as N}from"./toastStyle-B4gFO7nm.js";import{T as v}from"./TextInput-DogFLutj.js";import{a as O,s as T,r as Q,f as R,C as W,T as I,L as U}from"./Title-CLnnECgC.js";import{G as D}from"./iconBase-C7sRl30R.js";import"./index-CmJlNpiI.js";const H=()=>{const{mutate:o,isPending:t}=F({mutationKey:["add/book_to_library"],mutationFn:r=>O(r)});return{mutate:o,isPending:t}},q={title:"",author:"",totalPages:0},J=()=>{const o=E(),{data:t}=B(2,3),{mutate:r,isPending:c}=H(),l=k(),{handleSubmit:d,control:n,formState:{errors:i}}=V({defaultValues:q,mode:"onSubmit"}),b=async a=>{r({...a,totalPages:Number(a.totalPages)},{onSuccess:async()=>{await o.invalidateQueries({queryKey:["fetch/get_library"]}),y.success("Your book is now in the library!",{style:z})},onError:s=>{y.error(s.response.data.message,{style:N})}})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"mb-[8px] text-[10px] font-medium text-[#F9F9F9] md:text-[14px]",children:"Create your library:"}),e.jsxs("form",{onSubmit:d(b),children:[e.jsxs("div",{className:"mb-[20px] flex flex-col items-center justify-center gap-[8px]",children:[e.jsx(w,{name:"title",control:n,render:({field:a})=>{var s;return e.jsx(v,{...a,errorMessage:(s=i.title)==null?void 0:s.message,label:"Book title:"})}}),e.jsx(w,{name:"author",control:n,render:({field:a})=>{var s;return e.jsx(v,{...a,errorMessage:(s=i.author)==null?void 0:s.message,label:"The author:"})}})," ",e.jsx(w,{name:"totalPages",control:n,render:({field:a})=>{var s;return e.jsx(v,{...a,errorMessage:(s=i.totalPages)==null?void 0:s.message,label:"Number of pages:"})}})]}),e.jsx("button",{type:"submit",className:T,disabled:c,children:"To apply"})]})]}),e.jsxs("div",{className:"mt-[20px] rounded-[12px] bg-[#262626] p-[12px] xs:p-[20px] md:mt-0 lg:mt-[78px]",children:[e.jsx("h3",{className:"mb-[20px] text-[18px] font-medium leading-[20px] text-[#E3E3E3]",children:"Recommended books"}),e.jsx("ul",{className:"flex justify-center gap-[5px] xs:gap-[20px]",children:t==null?void 0:t.results.map(({_id:a,imageUrl:s,title:h,author:f})=>{const A=`${h.slice(0,5)}${h.length>=5?"...":""}`;return e.jsxs("li",{className:"flex w-[71px] flex-col",children:[e.jsx("img",{src:s,alt:h,width:71,height:107,className:"h-[107px] w-[71px] rounded-[8px]"}),e.jsxs("div",{className:"mt-[8px] flex-grow-[1]",children:[e.jsx("h4",{className:"text-[10px] font-bold leading-[12px] text-[#E3E3E3]",children:A}),e.jsx("p",{className:"text-[10px] font-normal leading-[12px] text-[#686868]",children:f})]})]},a)})}),e.jsxs("div",{className:"mt-[20px] flex items-center justify-between",children:[e.jsx("button",{type:"button",onClick:()=>l(C.main),className:"text-[14px] leading-[18px] text-[#686868] underline",children:"Home"}),e.jsx("button",{type:"button",onClick:()=>l(C.main),children:e.jsx(L,{})})]})]})]})},K=()=>{const{mutate:o,isPending:t}=F({mutationKey:["remove/book-from-library"],mutationFn:r=>Q(r)});return{mutate:o,isPending:t}},G="data:image/webp;base64,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",Y=()=>e.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-[20px]",children:[e.jsx("div",{className:"flex h-[100px] w-[100px] items-center justify-center rounded-[65px] bg-[#262626] md:h-[130px] md:w-[130px]",children:e.jsx("img",{src:G,alt:"book",width:70,height:70,className:"h-[50px] w-[50px] md:h-[70px] md:w-[70px]"})}),e.jsxs("p",{className:"max-w-[274px] text-center text-[14px] font-normal leading-[18px] text-[#F9F9F9]",children:["To start training, add"," ",e.jsx("span",{className:"text-[#686868]",children:"some of your books"})," or from the recommended ones"]})]}),X=()=>{const{mutate:o,isPending:t}=F({mutationKey:["filter/filter-my-library"],mutationFn:r=>R(r)});return{mutate:o,isPending:t}};function Z(o){return D({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"},child:[]}]})(o)}const $=({options:o,currentOption:t,handleChangeCurrentOption:r})=>{const[c,l]=p.useState(!1),d=p.useRef(null);return p.useEffect(()=>{const n=i=>{if(d.current&&!d.current.contains(i.target)){l(!1);return}};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]),e.jsxs("div",{className:"relative","data-el":"filter-books",ref:d,children:[e.jsxs("button",{onClick:()=>l(!c),type:"button",className:"flex w-[153px] max-w-[153px] items-center justify-between rounded-[12px] border-[1px] border-[#3E3E3E] p-[12px] md:p-[14px]",children:[t," ",e.jsx(Z,{className:`h-[22px] w-[22px] ${c?"rotate-[180deg]":""} transition-custom`})]}),e.jsx("ul",{className:`absolute top-[116%] flex w-full flex-col gap-[7px] overflow-hidden rounded-[12px] bg-[#262626] p-[14px] shadow-lg ${c?"max-h-60 opacity-100":"max-h-0 opacity-0"} transition-custom`,children:o.map(({type:n,option:i})=>e.jsx("li",{className:` ${t===i?"cursor-default text-[#F9F9F9]":"cursor-pointer text-[#686868]"} transition-custom text-[12px] leading-[18px] md:text-[14px]`,onClick:()=>{r(n,i),l(!1)},children:i},n))})]})},S=[{type:"unread",option:"Unread"},{type:"in-progress",option:"In progress"},{type:"done",option:"Done"},{type:"",option:"All books"}];function ne(){const o=E(),{data:t,isLoading:r}=M(),{mutate:c,isPending:l}=K(),{mutate:d,isPending:n}=X(),[i,b]=p.useState(S[S.length-1].option),[a,s]=p.useState([]);p.useEffect(()=>{t&&s(t)},[t]);const h=r||l||n,f=(g,j)=>{g.stopPropagation(),c(j,{onSuccess:({id:x})=>{s(m=>m.filter(({_id:u})=>u!==x))},onError:x=>{var m,u;y.error(((u=(m=x.response)==null?void 0:m.data)==null?void 0:u.message)||"Failed to remove book",{style:N})}})},A=async(g,j)=>{if(b(j),g===""){await o.invalidateQueries({queryKey:["fetch/get_library"]}),t&&s(t);return}d(g,{onSuccess:x=>s(x),onError:x=>{var m,u;y.error(((u=(m=x.response)==null?void 0:m.data)==null?void 0:u.message)||"Failed to filter books",{style:N})}})};return e.jsxs(W,{childrenSecond:e.jsx(J,{}),children:[e.jsxs("div",{className:"mb-7 flex items-center justify-between",children:[e.jsx(I,{children:"My Library"}),e.jsx($,{options:S,currentOption:i,handleChangeCurrentOption:A})]}),h?e.jsx(U,{}):a.length?e.jsx(P,{data:a,onDeleteBookFromLibrary:f}):e.jsx(Y,{})]})}export{ne as default};
