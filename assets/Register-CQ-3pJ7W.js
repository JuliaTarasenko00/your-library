import{d as g,u as h,a as j,r as E,b as c,j as e,c as v}from"./index-ByaahRT0.js";import{u as b,C as m}from"./ErrorTitle-CMSzSQjQ.js";import{c as w,d as l,e as S,u as y,A,E as R,P as k,a as N,C as P,b as T,o as C,t as F}from"./ComponentLoader-DEoTVhmX.js";import{T as M}from"./TextInput-BiDlahjH.js";import"./iconBase-CfmIlyl6.js";import"./index-CE8ij-pB.js";const q=w().shape({name:l().min(3).required(),email:l().matches(S,"Enter a valid Email*").required("Enter a valid Email*"),password:l().min(8).required("Enter a valid Password*")}),I=()=>{const{mutate:t,isPending:r}=y({mutationKey:["fetch/signup"],mutationFn:n=>g(n)});return{isPending:r,mutate:t}},L={name:"",email:"",password:""};function D(){const t=h(),{mutate:r,isPending:n}=I(),{token:u,setToken:d,setRefreshToken:x}=j(),{control:o,handleSubmit:p,formState:{errors:i}}=b({defaultValues:L,mode:"onSubmit",resolver:C(q)}),f=a=>{r(a,{onSuccess:s=>{d(s.token),x(s.refreshToken)},onError:s=>{v.error(s.message,{style:F})}})};return E.useEffect(()=>{u&&t(c.main)},[u]),e.jsx(A,{children:e.jsxs("form",{onSubmit:p(f),className:"flex flex-col items-start justify-between",children:[e.jsxs("div",{className:"flex w-full flex-col items-center justify-center gap-[14px]",children:[e.jsx(m,{name:"name",control:o,render:({field:a})=>{var s;return e.jsx(M,{...a,errorMessage:(s=i.name)==null?void 0:s.message,label:"Name:"})}}),e.jsx(m,{name:"email",control:o,render:({field:a})=>{var s;return e.jsx(R,{...a,errorMessage:(s=i.email)==null?void 0:s.message})}}),e.jsx(m,{name:"password",control:o,render:({field:a})=>{var s;return e.jsx(k,{...a,errorMessage:(s=i.password)==null?void 0:s.message})}})]}),e.jsxs("div",{className:"mt-[82px] flex items-center gap-[14px] md:gap-[20px]",children:[e.jsx(N,{children:n?e.jsxs("div",{className:"flex items-center gap-[14px]",children:[e.jsx(P,{})," Registration"]}):"Registration"}),e.jsx(T,{to:c.login,children:"Already have an account?"})," "]})]})})}export{D as default};
