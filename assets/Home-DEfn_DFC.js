import{r as l,p as u,j as e,$ as h,q as f}from"./index-ByaahRT0.js";import{a as g}from"./index-CE8ij-pB.js";import{u as w,a as b,b as j}from"./index-BAa32XT0.js";import"./iconBase-CfmIlyl6.js";const y=()=>{const[t,s]=l.useState(!1),n=()=>{s(!t)};return l.useEffect(()=>{t?document.body.style.overflow="hidden":document.body.style.overflow="auto"},[t]),{open:t,onToggleModal:n}},F=document.getElementById("modal"),N=({children:t,closeModal:s,isOpen:n})=>{const r=o=>{o.currentTarget===o.target&&s()};return l.useEffect(()=>{const o=i=>{i.code==="Escape"&&s()};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[s]),u.createPortal(e.jsxs("div",{className:`relative z-10 ${n?"h-100% w-100% opacity-100":"h-0 w-0 opacity-0"} transition duration-[450ms] ease-out`,"aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:`${n?"h-100% w-100% opacity-100":"h-0 w-0 opacity-0"} fixed inset-0 transition duration-[450ms] ease-out`,"aria-hidden":"true"}),e.jsx("div",{className:`fixed inset-0 ${n?"h-100% w-100% opacity-100":"h-0 w-0 opacity-0"} z-10 w-screen overflow-y-auto transition duration-[450ms] ease-out`,children:e.jsx("div",{className:`flex min-h-full items-end justify-center ${n?"h-100% w-100% opacity-100":"h-0 w-0 opacity-0"} sm:items-center sm:p-0 bg-[#14141499] p-4 text-center transition duration-[450ms] ease-out`,onClick:r,children:e.jsxs("div",{className:"relative rounded-[12px] border-[1px] border-[#68686833] bg-[#1F1F1F] px-[25px] py-[40px] md:p-[50px]",children:[e.jsx("button",{type:"button",className:"absolute right-[16px] top-[16px] h-[22px] w-[22px]",onClick:s,children:e.jsx(g,{})}),t]})})})]}),F)},v=({book:t,closeModal:s,isOpen:n})=>e.jsx(N,{closeModal:s,isOpen:n,children:t!==null&&e.jsxs("div",{className:"flex max-w-[450px] flex-col items-center justify-center",children:[e.jsx("img",{src:t.imageUrl,alt:t.title,width:153,height:233,className:"mb-[16px] h-[213px] w-[140px] rounded-[8px] md:h-[233px] md:w-[153px]"}),e.jsx("p",{className:"mb-[2px] text-[18px] font-bold leading-[18px] text-[#F9F9F9] md:text-[20px] md:leading-[20px]",children:t.title}),e.jsx("p",{className:"mb-[4px] text-[12px] font-normal leading-[14px] text-[#686868] md:text-[14px] md:leading-[18px]",children:t.author}),e.jsx("p",{className:"mb-[20px] text-[10px] leading-[12px] text-[#F9F9F9] md:mb-[32px]",children:t.totalPages}),e.jsx("button",{type:"button",className:"rounded-[30px] border-[1px] border-[#F9F9F933] px-[24px] py-[12px] text-[14px] font-bold leading-[18px] text-[#F9F9F9] md:px-[28px] md:py-[14px] md:text-[16px]",children:"Start reading"})]})}),k=({data:t})=>{const{open:s,onToggleModal:n}=y(),[r,o]=l.useState(null),i=a=>{const d=t==null?void 0:t.results.find(({_id:x})=>x===a);o(d),n()};return e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"grid grid-cols-2 justify-center gap-x-[8px] xs:gap-x-[21px] md:grid-cols-4 md:gap-x-[20px] md:gap-y-[27px] xl:grid-cols-5",children:t==null?void 0:t.results.map(({_id:a,imageUrl:d,title:x,author:p})=>{const c=`${x.slice(0,22)}${x.length>=22?"...":""}`;return e.jsxs("li",{className:"mx-auto mt-0 flex w-[120px] flex-col xs:w-[137px]",onClick:()=>i(a),children:[e.jsx("img",{src:d,alt:x,width:137,height:208,loading:"lazy",className:"h-[208px] rounded-[8px]"}),e.jsxs("div",{className:"flex-grow-[1]",children:[e.jsx("h2",{className:"mb-[2px] mt-[8px] text-[14px] font-bold leading-[18px] text-[#F9F9F9]",children:c}),e.jsx("h4",{className:"text-[10px] font-normal leading-[12px] text-[#686868]",children:p})]})]},a)})}),e.jsx(v,{book:r,closeModal:n,isOpen:s})]})},E="/books",$=async(t=1,s=10,n="",r="")=>{const{data:o}=await h.get(`${E}/recommend?page=${t}&limit=${s}&title=${n}&author=${r}`);return o},B=(t,s)=>{const{value:{title:n,author:r}}=w(),{data:o,isLoading:i}=f({queryKey:["response/recommend_book",t,s,n,r],queryFn:()=>$(t,s,n,r),enabled:!!t&&!!s});return{data:o,isLoading:i}},C=()=>e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsx("div",{className:"loader border-r-1 box-border h-[50px] w-[50px] animate-spin rounded-full border-t-2 border-solid border-white border-r-transparent"})}),m="flex md:h-[40px] md:w-[40px] w-[32px] h-[32px] items-center justify-center rounded-[30px] border-[1px] border-[#F9F9F933] text-[#F9F9F9] disabled:text-[#F9F9F933]";function I(){const[t,s]=l.useState(1),[n,r]=l.useState(2),[o,i]=l.useState(window.innerWidth),{data:a,isLoading:d}=B(t,n),x=()=>{(a==null?void 0:a.totalPages)!==t&&s(t+1)},p=()=>{t!==1&&s(t-1)};return l.useEffect(()=>{const c=()=>i(window.innerWidth);return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]),l.useEffect(()=>{if(o>=1280){r(10);return}else if(o>=768){r(8);return}else{r(2);return}},[o]),e.jsxs("section",{className:"h-full w-full",children:[e.jsxs("div",{className:"mb-[20px] flex items-center justify-between",children:[e.jsx("h2",{className:"text-[20px] font-bold leading-[32px] text-[#F9F9F9] md:text-[28px]",children:"Recommended"}),e.jsxs("div",{className:"flex items-center justify-end gap-[8px]",children:[e.jsx("button",{type:"button",onClick:p,disabled:t===1,className:m,children:e.jsx(b,{className:"h-[20px] w-[20px]"})}),e.jsx("button",{type:"button",onClick:x,disabled:(a==null?void 0:a.totalPages)===t,className:m,children:e.jsx(j,{className:"h-[20px] w-[20px]"})})]})]}),d?e.jsx(C,{}):e.jsx(k,{data:a})]})}export{I as default};
