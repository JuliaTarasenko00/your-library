import{d as g,u as f,a as h,r as j,b as c,j as e,c as E}from"./index-Dmf8GAkc.js";import{u as v,C as m}from"./iconBase-CwTBR0sZ.js";import{c as b,d as l,e as w,u as S,A as y,E as A,P as N,a as R,C as P,b as k,o as C,t as F}from"./ComponentLoader-mNJenG25.js";import{T as M}from"./TextInput-DCObiCZV.js";const q=b().shape({name:l().min(3).required(),email:l().matches(w,"Enter a valid Email*").required("Enter a valid Email*"),password:l().min(8).required("Enter a valid Password*")}),I=()=>{const{mutate:t,isPending:r}=S({mutationKey:["fetch/signup"],mutationFn:n=>g(n)});return{isPending:r,mutate:t}},L={name:"",email:"",password:""};function U(){const t=f(),{mutate:r,isPending:n}=I(),{token:u,setToken:d}=h(),{control:o,handleSubmit:x,formState:{errors:i}}=v({defaultValues:L,mode:"onSubmit",resolver:C(q)}),p=a=>{r(a,{onSuccess:s=>{d(s.token)},onError:s=>{E.error(s.message,{style:F})}})};return j.useEffect(()=>{u&&t(c.main)},[u]),e.jsx(y,{children:e.jsxs("form",{onSubmit:x(p),className:"flex flex-col items-start justify-between",children:[e.jsxs("div",{className:"flex w-full flex-col items-center justify-center gap-[14px]",children:[e.jsx(m,{name:"name",control:o,render:({field:a})=>{var s;return e.jsx(M,{...a,errorMessage:(s=i.name)==null?void 0:s.message,label:"Name:"})}}),e.jsx(m,{name:"email",control:o,render:({field:a})=>{var s;return e.jsx(A,{...a,errorMessage:(s=i.email)==null?void 0:s.message})}}),e.jsx(m,{name:"password",control:o,render:({field:a})=>{var s;return e.jsx(N,{...a,errorMessage:(s=i.password)==null?void 0:s.message})}})]}),e.jsxs("div",{className:"mt-[82px] flex items-center gap-[14px] md:gap-[20px]",children:[e.jsx(R,{children:n?e.jsxs("div",{className:"flex items-center gap-[14px]",children:[e.jsx(P,{})," Registration"]}):"Registration"}),e.jsx(k,{to:c.login,children:"Already have an account?"})," "]})]})})}export{U as default};
